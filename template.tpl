___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "__wm": "VGVtcGxhdGUtQXV0aG9yX0Nvb2tpZU1vbnN0ZXItU2ltby1BaGF2YQ==",
  "categories": ["UTILITY"],
  "version": 1,
  "securityGroups": [],
  "displayName": "Cookie Monster",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Use this tag to set browser cookies in the HTTP response. You can also configure the cookie to fetch its value from an existing 1st party cookie (if available).",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "PARAM_TABLE",
    "name": "cookies",
    "displayName": "Add Cookies To Set",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "name",
          "displayName": "Name",
          "simpleValueType": true,
          "valueValidators": [
            {
              "type": "NON_EMPTY"
            }
          ]
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "value",
          "displayName": "Value",
          "simpleValueType": true,
          "valueValidators": [
            {
              "type": "NON_EMPTY",
              "enablingConditions": [],
              "errorMessage": ""
            }
          ]
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "TEXT",
          "name": "expiration",
          "displayName": "Expiration",
          "simpleValueType": true,
          "defaultValue": 1800,
          "valueValidators": [
            {
              "type": "NON_NEGATIVE_NUMBER"
            }
          ],
          "valueUnit": "seconds (0 for session cookie)"
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "TEXT",
          "name": "domain",
          "displayName": "Domain",
          "simpleValueType": true,
          "defaultValue": "auto",
          "valueValidators": [
            {
              "type": "NON_EMPTY"
            }
          ]
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "CHECKBOX",
          "name": "httpOnly",
          "checkboxText": "HttpOnly",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ],
    "editRowTitle": "Edit Cookie",
    "newRowButtonText": "Add Cookie",
    "newRowTitle": "Add Cookie"
  }
]


___SANDBOXED_JS_FOR_SERVER___

// Load template APIs
const setCookie = require('setCookie');

// Cookies array exist check
if (!data.cookies) {
  data.gtmOnSuccess();

  return;
}

// Create reference to param table
const cookies = data.cookies.length ? data.cookies : [];

// Go through all the rows in the table and set each as a response cookie
cookies.forEach(cookie => {
  const name = cookie.name;
  const value = cookie.value;
  const options = {
    domain: cookie.domain,
    path: '/',
    secure: true
  };
  // Only set expiration if it's a positive integer
  if (cookie.expiration > 0) options['max-age'] = cookie.expiration;
  if (cookie.httpOnly) options.HttpOnly = cookie.httpOnly;
  setCookie(name, value, options);
});

data.gtmOnSuccess();


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 26/03/2021, 10:04:45


